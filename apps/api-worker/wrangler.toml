name = "rag-bookmarks-api"
main = "src/index.ts"
compatibility_date = "2024-03-01"
compatibility_flags = ["nodejs_compat"]

[dev]
port = 8787
inspector_port = 9229

[vars]
ENVIRONMENT = "development"

# Queue producers only - consumers are in separate workers
[[queues.producers]]
queue = "bookmark-ingestion"
binding = "INGESTION_QUEUE"

[[queues.producers]]
queue = "entity-extraction"
binding = "ENTITY_QUEUE"

# Secrets (set via wrangler secret put):
# - DATABASE_URL
# - OPENROUTER_API_KEY  (LLM for summaries)
# - JINA_API_KEY        (embeddings + reranking)
# - GOOGLE_CLIENT_ID
# - GOOGLE_CLIENT_SECRET
# - JWT_SECRET
# - SUPABASE_URL
# - SUPABASE_ANON_KEY
# - TMDB_API_KEY        (movie/TV enrichment)
